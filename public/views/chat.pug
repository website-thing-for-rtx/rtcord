mixin message(msg)
  .message(
    data-userid=msg.userId
    data-messageid=msg.id
    data-message=msg.message
  )
    img(
        src=`/avatars/${msg.userId}.jpg` 
        onerror=`this.onerror=null; this.src='/avatars/${msg.userId}.png';` 
        alt="Avatar" 
        width="120" 
        height="120"
    )
    p.name= userMap[msg.userId]
    p.text(data-message=`${JSON.stringify(msg.message)}`)= msg.message

mixin channel(channel)
  .channel(
    data-channelid=channel.id
    data-name=channel.name
  )
    //img.avatar(src=`/avatars/${msg.userId}.png`)
    a(href=`/chat/1/${channel.id}`).channel= channel.name

html
  head
    title My Page
    link(rel="stylesheet", href="/css/styles.css")
    //link(rel="stylesheet", href="/css/chat.css")
  body
    div
        div.channels
            if channels && channels.length
              each channel in channels
                +channel(channel)
        div.msgs
            if messages && messages.length
              each message in messages
                +message(message)
        div
            input.messageInput(type="text", name="")
            button.sendMsg Send Message
    script.
      const serverId = !{JSON.stringify(serverId)};
      const channelId = !{JSON.stringify(channelId)};
      const userId = !{JSON.stringify(userId)};
      const userMap = !{JSON.stringify(userMap)};
    script(src="/js/app.js")
            